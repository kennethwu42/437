<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Camping and Hiking</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,400;0,700;1,400&family=Playfair+Display:wght@700&display=swap"
      rel="stylesheet"
    />

    <!-- CSS -->
    <link rel="stylesheet" href="/styles/reset.css" />
    <link rel="stylesheet" href="/styles/tokens.css" />
    <link rel="stylesheet" href="/styles/page.css" />
  </head>

  <body>
    <!-- ✅ Wrap entire page in mu-auth -->
    <mu-auth provides="camping:auth">
      <!-- ✅ Custom header with login/logout controls -->
      <blz-header>
        Camping and Hiking
        <a href="/activities.html">Activities</a>
        <a href="/campsite.html">Campsites</a>
        <a href="/trail.html">Trails</a>
        <a href="/viewpoint.html">Viewpoints</a>
      </blz-header>

      <div class="page-wrapper">
        <main>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <p>Explore outdoor adventures in the San Luis Obispo area:</p>
            <label style="display: flex; align-items: center; gap: 0.5rem;">
              <input id="darkModeToggle" type="checkbox" autocomplete="off" />
              Dark mode
            </label>
          </div>

          <img
            src="/images/mountainslo.webp"
            alt="Scenic San Luis Obispo Mountains"
            class="main-image"
          />

          <ul class="link-grid">
            <li><a href="campsite.html" class="link-card">Campsite</a></li>
            <li><a href="activities.html" class="link-card">Activities</a></li>
            <li><a href="trail.html" class="link-card">Trail</a></li>
            <li><a href="viewpoint.html" class="link-card">Viewpoint</a></li>
          </ul>
        </main>
      </div>
    </mu-auth>

    <!-- ✅ Define Mustang components -->
    <script type="module">
      import { define, Auth, Events } from "@calpoly/mustang";
      import { HeaderElement } from "/scripts/header.js";

      define({
        "mu-auth": Auth.Provider,
        "blz-header": HeaderElement
      });

      HeaderElement.initializeOnce();
    </script>

    <!-- Dark mode script -->
    <script type="module">
      const label = document.querySelector('label');
      label.onchange = (event) => {
        event.stopPropagation();
        const isDark = event.target.checked;
        label.dispatchEvent(new CustomEvent("darkmode:toggle", {
          bubbles: true,
          detail: { checked: isDark }
        }));
      };

      document.body.addEventListener("darkmode:toggle", (event) => {
        if (event.detail.checked) {
          document.body.classList.add("dark-mode");
        } else {
          document.body.classList.remove("dark-mode");
        }
      });
    </script>
  </body>
</html>
